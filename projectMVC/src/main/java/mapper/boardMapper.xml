<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="boardSQL">
 <!-- 글쓰기 -->
 	<insert id="write" parameterType="java.util.Map">
 		insert into board(seq, id, name, email, subject, content, ref) 
		values (seq_board.nextval, #{id}, #{name}, #{email}, #{subject}, #{content},seq_board.nextval)
 	</insert>
<!-- 목록 -->
	<select id="boardList" parameterType="java.util.Map" resultType="board">
		select * from
		(select rownum rn, tt.* from
		(select * from board order by ref desc, step asc)tt
		)where rn  <![CDATA[>=]]>#{startNum} and rn  <![CDATA[<=]]> #{endNum}
	</select>
<!-- 총글수 -->
	<select id="getTotalA" resultType="Integer">
		select count(*) from board
	</select>
<!-- 글 한개 -->
	<select id="getBoard" parameterType="Integer" resultType="board.dto.BoardDTO">
		select * from board where seq = #{seq}
	</select>
<!-- 조회수 증가 -->
	<update id="hitUpdate" parameterType="Integer">
		update board set hit=hit+1 where seq=#{seq}
	</update>
<!-- 글 수정 -->
	<update id="boardUpdate" parameterType="java.util.Map">
		update board set subject=#{subject}, content=#{content}, logtime=sysdate where seq=#{seq}
	</update>
 </mapper>